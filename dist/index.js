const e=()=>{const e=new Map,n=n=>(e.has(n)||e.set(n,new Set),e.get(n)),t=(e,t)=>{if("function"!=typeof t)throw new TypeError("Expecting callback function as second argument");return n(e).add(t),()=>n(e).delete(t)};return{publish:(e,t={})=>{n(e).forEach((e=>e(t)))},subscribe:t,subscribeOnce:(e,n)=>{const r=t(e,(e=>{n(e),r()}));return r},unsubscribeAll:n=>e.delete(n)}};export{e as createPubSub};
